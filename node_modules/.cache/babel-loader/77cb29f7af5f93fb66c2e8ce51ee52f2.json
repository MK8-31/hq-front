{"ast":null,"code":"import _asyncToGenerator from \"/app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport \"regenerator-runtime/runtime.js\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport constants from \"@/common/constants\";\nimport axios from \"axios\";\nexport default {\n  data: function data() {\n    return {\n      drawer: false,\n      settings: false,\n      menuItems: constants.menuItems,\n      logout_dialog: false\n    };\n  },\n  computed: {\n    loggedIn: function loggedIn() {\n      return this.$store.getters.getLoggedIn;\n    }\n  },\n  methods: {\n    logout: function logout() {\n      var _this = this;\n\n      return _asyncToGenerator( /*#__PURE__*/regeneratorRuntime.mark(function _callee() {\n        return regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return axios.delete(\"/api/v1/auth/sign_out\", {\n                  data: {\n                    uid: decodeURIComponent(_this.$cookies.get(\"uid\")),\n                    \"access-token\": _this.$cookies.get(\"access-token\"),\n                    client: _this.$cookies.get(\"client\")\n                  }\n                }).then(function () {\n                  // console.log(response);\n                  _this.logout_dialog = false;\n\n                  _this.$store.commit(\"setLoggedIn\", false);\n\n                  _this.$cookies.remove(\"uid\");\n\n                  _this.$cookies.remove(\"access-token\");\n\n                  _this.$cookies.remove(\"client\");\n\n                  if (_this.$router.path !== \"/\") {\n                    _this.$router.push(\"/\");\n                  }\n                }).catch(function (err) {\n                  console.error(err);\n                });\n\n              case 2:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }))();\n    }\n  }\n};","map":{"version":3,"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA0HA;AACA;AAEA;AACAA,MADA,kBACA;AACA;AACAC,mBADA;AAEAC,qBAFA;AAGAC,oCAHA;AAIAC;AAJA;AAMA,GARA;AASAC;AACAC,YADA,sBACA;AACA;AACA;AAHA,GATA;AAcAC;AACAC,UADA,oBACA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAMAC,MACAC,MADA,CACA,uBADA,EACA;AACAV;AACAW,sEADA;AAEA,sEAFA;AAGAC;AAHA;AADA,iBADA,EAQAC,IARA,CAQA;AACA;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;AACA;AACA;AACA,iBAlBA,EAmBAC,KAnBA,CAmBA;AACAC;AACA,iBArBA,CANA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AA4BA;AA7BA;AAdA","names":["data","drawer","settings","menuItems","logout_dialog","computed","loggedIn","methods","logout","axios","delete","uid","client","then","catch","console"],"sourceRoot":"src/components","sources":["AppHeader.vue"],"sourcesContent":["<template>\n  <div>\n    <header>\n      <v-app-bar app dark>\n        <v-app-bar-nav-icon @click=\"drawer = true\"></v-app-bar-nav-icon>\n        <v-toolbar-title\n          ><v-btn to=\"/\" text active-class=\"\">HabituationQuest</v-btn>\n        </v-toolbar-title>\n        <v-spacer></v-spacer>\n        <v-tabs right>\n          <v-tab link to=\"/\">\n            <v-btn icon class=\"right\">\n              <v-icon>mdi-home</v-icon>\n            </v-btn>\n          </v-tab>\n          <v-tab link to=\"/record\">\n            <v-btn icon class=\"right\">\n              <v-icon>mdi-lead-pencil</v-icon>\n            </v-btn>\n          </v-tab>\n          <v-tab link to=\"/show_record\">\n            <v-btn icon class=\"right\">\n              <v-icon>mdi-book-open-page-variant-outline</v-icon>\n            </v-btn>\n          </v-tab>\n          <v-tab link to=\"/task_list\">\n            <v-btn icon class=\"right\">\n              <v-icon>mdi-clipboard-outline</v-icon>\n            </v-btn>\n          </v-tab>\n          <v-tab link to=\"/help\">\n            <v-btn icon class=\"right\">\n              <v-icon>mdi-help</v-icon>\n            </v-btn>\n          </v-tab>\n          <v-tab link to=\"/class_change\">\n            <v-btn icon class=\"right\">\n              <v-icon>mdi-account-switch</v-icon>\n            </v-btn>\n          </v-tab>\n          <v-tab link to=\"/account\">\n            <v-btn icon class=\"right\">\n              <v-icon>mdi-account</v-icon>\n            </v-btn></v-tab\n          >\n        </v-tabs>\n      </v-app-bar>\n      <v-navigation-drawer v-model=\"drawer\" fixed temporary>\n        <v-list nav dense>\n          <v-list-item-group v-if=\"loggedIn\">\n            <v-list-item\n              link\n              :to=\"menuItem.url\"\n              v-for=\"(menuItem, index) in menuItems\"\n              :key=\"index\"\n              :id=\"menuItem.name\"\n            >\n              <v-list-item-icon>\n                <v-icon>{{ menuItem.icon }}</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>{{ menuItem.name }}</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list-item-group>\n          <v-list-item-group>\n            <v-list-item id=\"home\" link to=\"/\">\n              <v-list-item-icon>\n                <v-icon>mdi-home</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>Home</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n            <v-list-item id=\"signup\" v-if=\"!loggedIn\" link to=\"signup\">\n              <v-list-item-icon>\n                <v-icon>mdi-signup</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>SignUp</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n            <v-list-item v-if=\"!loggedIn\" link to=\"/login\">\n              <v-list-item-icon>\n                <v-icon>mdi-login</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>Login</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n            <v-list-item v-if=\"loggedIn\" @click=\"logout_dialog = true\">\n              <v-list-item-icon>\n                <v-icon>mdi-logout</v-icon>\n              </v-list-item-icon>\n              <v-list-item-content>\n                <v-list-item-title>Logout</v-list-item-title>\n              </v-list-item-content>\n            </v-list-item>\n          </v-list-item-group>\n        </v-list>\n      </v-navigation-drawer>\n    </header>\n    <v-dialog v-model=\"logout_dialog\" max-width=\"400\">\n      <v-card>\n        <v-card-title>\n          <div>ログアウト</div>\n        </v-card-title>\n        <v-card-text>\n          <p>ログアウトしますか？</p>\n        </v-card-text>\n\n        <v-card-actions>\n          <v-spacer></v-spacer>\n          <v-btn @click=\"logout_dialog = false\">閉じる</v-btn>\n          <v-btn color=\"primary\" @click=\"logout()\">OK</v-btn>\n        </v-card-actions>\n      </v-card>\n    </v-dialog>\n  </div>\n</template>\n\n<script>\n  import constants from \"@/common/constants\";\n  import axios from \"axios\";\n\n  export default {\n    data() {\n      return {\n        drawer: false,\n        settings: false,\n        menuItems: constants.menuItems,\n        logout_dialog: false,\n      };\n    },\n    computed: {\n      loggedIn() {\n        return this.$store.getters.getLoggedIn;\n      },\n    },\n    methods: {\n      async logout() {\n        // console.log({\n        //   uid: decodeURIComponent(this.$cookies.get(\"uid\")),\n        //   \"access-token\": this.$cookies.get(\"access-token\"),\n        //   client: this.$cookies.get(\"client\"),\n        // });\n        await axios\n          .delete(\"/api/v1/auth/sign_out\", {\n            data: {\n              uid: decodeURIComponent(this.$cookies.get(\"uid\")),\n              \"access-token\": this.$cookies.get(\"access-token\"),\n              client: this.$cookies.get(\"client\"),\n            },\n          })\n          .then(() => {\n            // console.log(response);\n            this.logout_dialog = false;\n            this.$store.commit(\"setLoggedIn\", false);\n            this.$cookies.remove(\"uid\");\n            this.$cookies.remove(\"access-token\");\n            this.$cookies.remove(\"client\");\n            if (this.$router.path !== \"/\") {\n              this.$router.push(\"/\");\n            }\n          })\n          .catch((err) => {\n            console.error(err);\n          });\n      },\n    },\n  };\n</script>\n<style lang=\"scss\" scoped>\n  /* scoped属性をつけることで、styleをそのコンポーネント内のみ適用 */\n  .v-toolbar__title {\n    overflow: visible !important;\n    margin-right: 50px !important;\n  }\n  // .v-app-bar__nav-icon {\n  //   @include display_pc {\n  //     display: none !important;\n  //   }\n  // }\n  // .v-toolbar {\n  //   .v-btn.right {\n  //     display: none;\n\n  //     @include display_pc {\n  //       display: block !important;\n  //     }\n  //   }\n  // }\n  .v-tab {\n    display: none;\n\n    @include display_pc {\n      display: block !important;\n    }\n  }\n  .bar-icon {\n    margin-right: 10px !important;\n  }\n</style>\n"]},"metadata":{},"sourceType":"module"}