{"ast":null,"code":"import \"/app/node_modules/core-js/modules/es.array.iterator.js\";\nimport \"/app/node_modules/core-js/modules/es.promise.js\";\nimport \"/app/node_modules/core-js/modules/es.object.assign.js\";\nimport \"/app/node_modules/core-js/modules/es.promise.finally.js\";\nimport \"core-js/modules/es.object.to-string.js\";\nimport Vue from \"vue\";\nimport App from \"./App.vue\";\nimport vuetify from \"./plugins/vuetify\";\nimport Axios from \"axios\";\nimport VueCookies from \"vue-cookies\";\nimport store from \"./store/store\"; // この書き方じゃないとエラー\n\nimport * as VeeValidate from \"vee-validate\";\nimport ja from \"vee-validate/dist/locale/ja\";\nimport { localize } from \"vee-validate\";\nimport router from \"./router/router\";\nVue.config.productionTip = false;\nlocalize(\"ja\", ja);\nVue.use(VeeValidate, {\n  locale: ja\n});\nVue.use(VueCookies); // 開発環境と本番環境で接続先を変更する\n\nAxios.defaults.baseURL = process.env.NODE_ENV === \"production\" ? \"http://backend.habituation-quest.tk\" : \"http://localhost:3030\";\nrouter.beforeEach(function (to, from, next) {\n  // ログインに必要なトークンがあるかどうか確認\n  var accessToken = VueCookies.get(\"access-token\");\n  var client = VueCookies.get(\"client\");\n  var uid = VueCookies.get(\"uid\");\n\n  if (accessToken && client && uid) {\n    store.commit(\"setRequestHeadersRequiredToMaintainLoginStatus\", accessToken, client, uid);\n    store.commit(\"setLoggedIn\", true);\n  } // isPublic でない場合(=認証が必要な場合)、かつ、ログインしていない場合\n\n\n  if (to.matched.some(function (record) {\n    return !record.meta.isPublic;\n  }) && !store.getters.getLoggedIn) {\n    // queryはログイン後の遷移などに使用できる\n    next({\n      path: \"/login\",\n      query: {\n        redirect: to.fullPath\n      }\n    });\n  } else {\n    next();\n  }\n});\nVue.config.productionTip = false;\nnew Vue({\n  vuetify: vuetify,\n  render: function render(h) {\n    return h(App);\n  },\n  router: router,\n  store: store\n}).$mount(\"#app\");","map":{"version":3,"sources":["/app/src/main.js"],"names":["Vue","App","vuetify","Axios","VueCookies","store","VeeValidate","ja","localize","router","config","productionTip","use","locale","defaults","baseURL","process","env","NODE_ENV","beforeEach","to","from","next","accessToken","get","client","uid","commit","matched","some","record","meta","isPublic","getters","getLoggedIn","path","query","redirect","fullPath","render","h","$mount"],"mappings":";;;;;AAAA,OAAOA,GAAP,MAAgB,KAAhB;AACA,OAAOC,GAAP,MAAgB,WAAhB;AACA,OAAOC,OAAP,MAAoB,mBAApB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,UAAP,MAAuB,aAAvB;AACA,OAAOC,KAAP,MAAkB,eAAlB,C,CACA;;AACA,OAAO,KAAKC,WAAZ,MAA6B,cAA7B;AACA,OAAOC,EAAP,MAAe,6BAAf;AACA,SAASC,QAAT,QAAyB,cAAzB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AAEAT,GAAG,CAACU,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AACAH,QAAQ,CAAC,IAAD,EAAOD,EAAP,CAAR;AACAP,GAAG,CAACY,GAAJ,CAAQN,WAAR,EAAqB;AAAEO,EAAAA,MAAM,EAAEN;AAAV,CAArB;AAEAP,GAAG,CAACY,GAAJ,CAAQR,UAAR,E,CAEA;;AACAD,KAAK,CAACW,QAAN,CAAeC,OAAf,GACEC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,YAAzB,GACI,qCADJ,GAEI,uBAHN;AAKAT,MAAM,CAACU,UAAP,CAAkB,UAACC,EAAD,EAAKC,IAAL,EAAWC,IAAX,EAAoB;AACpC;AACA,MAAMC,WAAW,GAAGnB,UAAU,CAACoB,GAAX,CAAe,cAAf,CAApB;AACA,MAAMC,MAAM,GAAGrB,UAAU,CAACoB,GAAX,CAAe,QAAf,CAAf;AACA,MAAME,GAAG,GAAGtB,UAAU,CAACoB,GAAX,CAAe,KAAf,CAAZ;;AACA,MAAID,WAAW,IAAIE,MAAf,IAAyBC,GAA7B,EAAkC;AAChCrB,IAAAA,KAAK,CAACsB,MAAN,CACE,gDADF,EAEEJ,WAFF,EAGEE,MAHF,EAIEC,GAJF;AAMArB,IAAAA,KAAK,CAACsB,MAAN,CAAa,aAAb,EAA4B,IAA5B;AACD,GAbmC,CAcpC;;;AACA,MACEP,EAAE,CAACQ,OAAH,CAAWC,IAAX,CAAgB,UAACC,MAAD;AAAA,WAAY,CAACA,MAAM,CAACC,IAAP,CAAYC,QAAzB;AAAA,GAAhB,KACA,CAAC3B,KAAK,CAAC4B,OAAN,CAAcC,WAFjB,EAGE;AACA;AACAZ,IAAAA,IAAI,CAAC;AAAEa,MAAAA,IAAI,EAAE,QAAR;AAAkBC,MAAAA,KAAK,EAAE;AAAEC,QAAAA,QAAQ,EAAEjB,EAAE,CAACkB;AAAf;AAAzB,KAAD,CAAJ;AACD,GAND,MAMO;AACLhB,IAAAA,IAAI;AACL;AACF,CAxBD;AA0BAtB,GAAG,CAACU,MAAJ,CAAWC,aAAX,GAA2B,KAA3B;AAEA,IAAIX,GAAJ,CAAQ;AACNE,EAAAA,OAAO,EAAPA,OADM;AAENqC,EAAAA,MAAM,EAAE,gBAACC,CAAD;AAAA,WAAOA,CAAC,CAACvC,GAAD,CAAR;AAAA,GAFF;AAGNQ,EAAAA,MAAM,EAAEA,MAHF;AAINJ,EAAAA,KAAK,EAALA;AAJM,CAAR,EAKGoC,MALH,CAKU,MALV","sourcesContent":["import Vue from \"vue\";\nimport App from \"./App.vue\";\nimport vuetify from \"./plugins/vuetify\";\nimport Axios from \"axios\";\nimport VueCookies from \"vue-cookies\";\nimport store from \"./store/store\";\n// この書き方じゃないとエラー\nimport * as VeeValidate from \"vee-validate\";\nimport ja from \"vee-validate/dist/locale/ja\";\nimport { localize } from \"vee-validate\";\nimport router from \"./router/router\";\n\nVue.config.productionTip = false;\nlocalize(\"ja\", ja);\nVue.use(VeeValidate, { locale: ja });\n\nVue.use(VueCookies);\n\n// 開発環境と本番環境で接続先を変更する\nAxios.defaults.baseURL =\n  process.env.NODE_ENV === \"production\"\n    ? \"http://backend.habituation-quest.tk\"\n    : \"http://localhost:3030\";\n\nrouter.beforeEach((to, from, next) => {\n  // ログインに必要なトークンがあるかどうか確認\n  const accessToken = VueCookies.get(\"access-token\");\n  const client = VueCookies.get(\"client\");\n  const uid = VueCookies.get(\"uid\");\n  if (accessToken && client && uid) {\n    store.commit(\n      \"setRequestHeadersRequiredToMaintainLoginStatus\",\n      accessToken,\n      client,\n      uid\n    );\n    store.commit(\"setLoggedIn\", true);\n  }\n  // isPublic でない場合(=認証が必要な場合)、かつ、ログインしていない場合\n  if (\n    to.matched.some((record) => !record.meta.isPublic) &&\n    !store.getters.getLoggedIn\n  ) {\n    // queryはログイン後の遷移などに使用できる\n    next({ path: \"/login\", query: { redirect: to.fullPath } });\n  } else {\n    next();\n  }\n});\n\nVue.config.productionTip = false;\n\nnew Vue({\n  vuetify,\n  render: (h) => h(App),\n  router: router,\n  store,\n}).$mount(\"#app\");\n"]},"metadata":{},"sourceType":"module"}